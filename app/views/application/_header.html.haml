%nav.navbar.navbar-default.navbar-fixed-top
  .container
    .navbar-header
      %button.navbar-toggle.offcanvas-toggle{"aria-controls" => "navbar", "aria-expanded" => "false", "data-target" => "#navbar", "data-toggle" => "offcanvas", :type => "button"}
        %span.sr-only Toggle navigation
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      %a.navbar-brand{ href: root_path }
        %strong canoe
    #navbar.navbar-offcanvas.navbar-offcanvas-right
      %ul.nav.navbar-nav
        - if user_signed_in?
          %li
            = link_to new_discussion_path do
              %i.fa.fa-flag
              새 논의 만들기
          %li
            = link_to discussions_path do
              %i.fa.fa-comments
              논의
              - if current_user.crewing_discussions.unread.any?
                %span.badge.badge-default= current_user.crewing_discussions.unread.count
          / %li.dropdown.active
          /   %a.dropdown-toggle{"aria-expanded" => "false", "aria-haspopup" => "true", :href => "#", :role => "button" }
          /     %i.fa.fa-cubes
          /     승선한 카누
          /     %span.caret
          /   %ul.dropdown-menu.shown
          /     - current_user.crewing_canoes.each do |canoe|
          /       %li= link_to canoe.title, canoe_home_path(canoe)
          /     - unless current_user.crewing_canoes.empty?
          /       %li(role="separator" class="divider")
          /     %li
          /       = link_to new_canoe_path do
          /         %i.fa.fa-edit
          /         카누 만들기
          %li
            = link_to canoes_path do
              %i.fa.fa-cubes
              내 카누
          %li.dropdown.active
            %a.dropdown-toggle{:href => "#"}
              = user_byline current_user
              %span.caret
            %ul.dropdown-menu.shown
              %li
                = link_to messages_path do
                  - if current_user.mailbox.notifications.unread.any?
                    %i.fa.fa-bell.text-danger
                    %span.badge= current_user.mailbox.notifications.unread.count
                  - else
                    %i.fa.fa-bell-o.text-mute
                  알림
              %li
                = link_to edit_user_path do
                  %i.fa.fa-pencil-square-o
                  프로필
              %li
                = link_to destroy_user_session_path, method: :delete do
                  %i.fa.fa-sign-out
                  로그아웃
        - else
          %li= link_to '회원가입', sign_up_path
          %li= link_to '로그인', new_user_session_path
        %li
          %a(href='http://parti-xyz.uservoice.com/')
            %i.fa.fa-support
            고객센터
